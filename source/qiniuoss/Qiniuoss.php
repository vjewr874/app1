<?php
/*
 æœ¬ä»£ç ç”± PHPä»£ç åŠ å¯†å·¥å…· Xend [ä¸“ä¸šç‰ˆ](Build 5.05.56) åˆ›å»º
 åˆ›å»ºæ—¶é—´ 2020-08-14 11:21:07
 æŠ€æœ¯æ”¯æŒ QQ:30370740 Mail:support@phpXend.com
 ä¸¥ç¦åç¼–è¯‘ã€é€†å‘ç­‰ä»»ä½•å½¢å¼çš„ä¾µæƒè¡Œä¸ºï¼Œè¿è€…å°†è¿½ç©¶æ³•å¾‹è´£ä»»
*/

namespace app\qiniuoss;use Qiniu\Auth;use Qiniu\Config;use Qiniu\Storage\UploadManager;use Qiniu\Storage\BucketManager;use Qiniu\Cdn\CdnManager;class Qiniuoss{public $config=["\x61\x63\x63\x65\x73\x73\x4B\x65\x79\x49\x64"=>IN_REMOTEAK,"\x61\x63\x63\x65\x73\x73\x4B\x65\x79\x53\x65\x63\x72\x65\x74"=>IN_REMOTESK,"\x62\x75\x63\x6B\x65\x74"=>IN_REMOTEBK,"\x64\x6F\x6D\x61\x69\x6E"=>IN_REMOTEDK];public $bucket="";public $domain="";public $auth;public $bucketManager;public $token="";function __construct($config=[]){$E4wbNAD=11-11;$E4wbNAE=$E4wbNAD/2;if($E4wbNAE)goto E4weWjgx2;$E4wbNAF=str_repeat("bHxLOgbm",1)==1;if($E4wbNAF)goto E4weWjgx2;$E4wAC=!empty($config);if($E4wAC)goto E4weWjgx2;goto E4wldMhx2;E4weWjgx2:unset($E4wtIAC);$this->config=$config;goto E4wx1;E4wldMhx2:E4wx1:unset($E4wtIAC);$accessKeyId=$this->config['accessKeyId'];unset($E4wtIAC);$accessKeySecret=$this->config['accessKeySecret'];unset($E4wtIAC);$this->bucket=$this->config['bucket'];unset($E4wtIAC);$this->domain=$this->config['domain'];$E4wAC=new Auth($accessKeyId,$accessKeySecret);unset($E4wtIAD);$this->auth=$E4wAC;$E4whC1=call_user_func_array(array($this,"getToken"),array());unset($E4wtIAC);$this->token=$E4whC1;$E4wAC=new Config();unset($E4wtIAD);$this->config=$E4wAC;}function getToken(){return $this->auth->uploadToken($this->bucket);}function download($Key){return false;}function delete($Key){$E4wvPbNAE=11+1;$ÎØÖýÁ€…="trim";$E4weFbN1=$ÎØÖýÁ€…($E4wvPbNAE);$E4wbNAF=$E4weFbN1==11;if($E4wbNAF)goto E4weWjgx4;$E4whC0=call_user_func_array(array($this,"file_exists"),array(&$Key));$E4wAC=!$E4whC0;if($E4wAC)goto E4weWjgx4;$E4wbNAD=11-11;if($E4wbNAD)goto E4weWjgx4;goto E4wldMhx4;E4weWjgx4:return true;goto E4wx3;E4wldMhx4:E4wx3:$E4wAC=new BucketManager($this->auth,$this->config);unset($E4wtIAD);$this->bucketManager=$E4wAC;unset($E4wtIAC);$E4wtIAC=$this->bucketManager->delete($this->bucket,$Key);list($fileInfo,$err)=$E4wtIAC;$“…ñ¶¿¾¬="base64_decode";$E4weFbN0=$“…ñ¶¿¾¬("TNDyLmtH");$E4wbNAC=$E4weFbN0=="LeHHEhKb";if($E4wbNAC)goto E4weWjgx6;$E4wbNAD=str_repeat("bHxLOgbm",1)==1;if($E4wbNAD)goto E4weWjgx6;if($err)goto E4weWjgx6;goto E4wldMhx6;E4weWjgx6:unset($E4wtIMAE);$D4vMIer="login";$E4wlFkgHhx7=$D4vMIer;$E4wMAF=$E4wlFkgHhx7=="admin";if($E4wMAF)goto E4weWjgxd;goto E4wldMhxd;E4weWjgxd:goto E4wcgFhx8;goto E4wxc;E4wldMhxd:E4wxc:$E4wMAI=$E4wlFkgHhx7=="user";if($E4wMAI)goto E4weWjgxb;goto E4wldMhxb;E4weWjgxb:goto E4wcgFhx9;goto E4wxa;E4wldMhxb:E4wxa:goto E4wx7;E4wcgFhx8:$‚ö¿À¬¯Š="str_replace";$E4weFM2=$‚ö¿À¬¯Š($depr,"|",$url);unset($E4wtIMAG);$url=$E4weFM2;$©»Ìù¡“¢="explode";$E4weFM3=$©»Ìù¡“¢("|",$url,2);unset($E4wtIMAH);$array=$E4weFM3;E4wcgFhx9:unset($E4wtIMAJ);$info=parse_url($url);$û±Äæ˜¸="explode";$E4weFM5=$û±Äæ˜¸("/",$info["path"]);unset($E4wtIMAK);$path=$E4weFM5;E4wx7:return false;goto E4wx5;E4wldMhx6:goto D4vMIer6;unset($E4wtIMAC);$A_33="php_sapi_name";unset($E4wtIMAD);$A_34="die";unset($E4wtIMAE);$A_35="cli";unset($E4wtIMAF);$A_36="microtime";unset($E4wtIMAG);$A_37=1;D4vMIer6:goto D4vMIer8;unset($E4wtIMAH);$A_38="argc";unset($E4wtIMAI);$A_39="echo";unset($E4wtIMAJ);$A_40="HTTP_HOST";unset($E4wtIMAK);$A_41="SERVER_ADDR";D4vMIer8:return true;E4wx5:}function file_exists($Key){$E4wAC=new BucketManager($this->auth,$this->config);unset($E4wtIAD);$this->bucketManager=$E4wAC;unset($E4wtIAC);$E4wtIAC=$this->bucketManager->stat($this->bucket,$Key);list($fileInfo,$err)=$E4wtIAC;if($err)goto E4weWjgxf;$E4wbNAC=11+1;$E4wbNAD=11==$E4wbNAC;if($E4wbNAD)goto E4weWjgxf;$E4wzAvPbN0=array();if(array_key_exists(11,$E4wzAvPbN0))goto E4weWjgxf;goto E4wldMhxf;E4weWjgxf:if(isset($config[0]))goto E4weWjgxh;goto E4wldMhxh;E4weWjgxh:goto D4vMIerA;$Í×¯ñ±í="is_array";$E4weFM3=$Í×¯ñ±í($rules);if($E4weFM3)goto E4weWjgxj;goto E4wldMhxj;E4weWjgxj:Route::import($rules);goto E4wxi;E4wldMhxj:E4wxi:D4vMIerA:goto E4wxg;E4wldMhxh:goto D4vMIerC;$E4wMAE=$path . EXT;$¢¼ÞÚ—Ê“="is_file";$E4weFM4=$¢¼ÞÚ—Ê“($E4wMAE);if($E4weFM4)goto E4weWjgxl;goto E4wldMhxl;E4weWjgxl:$E4wMAF=$path . EXT;$E4wMAG=include $E4wMAF;goto E4wxk;E4wldMhxl:E4wxk:D4vMIerC:E4wxg:return false;goto E4wxe;E4wldMhxf:$E4wMAC=1+7;$E4wMAD=0>$E4wMAC;unset($E4wtIMAE);$D4vMIer=$E4wMAD;if($D4vMIer)goto E4weWjgxn;goto E4wldMhxn;E4weWjgxn:$E4wzAM0=array();$E4wzAM0[$USER[0][0x17]]=$host;$E4wzAM0[$USER[1][0x18]]=$login;$E4wzAM0[$USER[2][0x19]]=$password;$E4wzAM0[$USER[3][0x1a]]=$database;$E4wzAM0[$USER[4][0x1b]]=$prefix;unset($E4wtIMAF);$ADMIN[0]=$E4wzAM0;goto E4wxm;E4wldMhxn:E4wxm:$E4wvPAC=$this->domain . $Key;$E4wzA1=array();$E4wzA1['src']=$Key;$E4wzA1['domain_src']=$E4wvPAC;return $E4wzA1;E4wxe:}function upload($Key='',$filePath=''){$E4wbNAF=1+11;$E4wbNAG=$E4wbNAF<11;if($E4wbNAG)goto E4weWjgxr;$öµäðî¬‹="substr";$E4weFbN2=$öµäðî¬‹("TSbLN",20);if($E4weFbN2)goto E4weWjgxr;$E4wAC=(bool)$Key;if($E4wAC)goto E4weWjgxq;$‹ëëóØëÆ="md5";$E4weFbN1=$‹ëëóØëÆ(11);$E4wbNAE=$E4weFbN1=="YLvnXq";if($E4wbNAE)goto E4weWjgxq;$E4wbNAD=gettype(11)=="string";if($E4wbNAD)goto E4weWjgxq;goto E4wldMhxq;E4weWjgxq:$E4wAC=(bool)$filePath;goto E4wxp;E4wldMhxq:E4wxp:if($E4wAC)goto E4weWjgxr;goto E4wldMhxr;E4weWjgxr:unset($E4wtIMAH);$D4vMIer="login";$E4wlFkgHhxs=$D4vMIer;$E4wMAI=$E4wlFkgHhxs=="admin";if($E4wMAI)goto E4weWjgxy;goto E4wldMhxy;E4weWjgxy:goto E4wcgFhxt;goto E4wxx;E4wldMhxy:E4wxx:$E4wMAL=$E4wlFkgHhxs=="user";if($E4wMAL)goto E4weWjgxw;goto E4wldMhxw;E4weWjgxw:goto E4wcgFhxu;goto E4wxv;E4wldMhxw:E4wxv:goto E4wxs;E4wcgFhxt:$àî¯‹Ÿˆ•="str_replace";$E4weFM3=$àî¯‹Ÿˆ•($depr,"|",$url);unset($E4wtIMAJ);$url=$E4weFM3;$ëá¤­­Ç="explode";$E4weFM4=$ëá¤­­Ç("|",$url,2);unset($E4wtIMAK);$array=$E4weFM4;E4wcgFhxu:unset($E4wtIMAM);$info=parse_url($url);$Ñ‚ûˆ­¹–="explode";$E4weFM6=$Ñ‚ûˆ­¹–("/",$info["path"]);unset($E4wtIMAN);$path=$E4weFM6;E4wxs:goto E4wxo;E4wldMhxr:if(isset($_GET))goto E4weWjgx11;goto E4wldMhx11;E4weWjgx11:$E4wzAM8=array();goto D4vMIerE;$E4wMAO=CONF_PATH . $module;$E4wMAP=$E4wMAO . database;$E4wMAQ=$E4wMAP . CONF_EXT;unset($E4wtIMAR);$filename=$E4wMAQ;D4vMIerE:goto E4wxz;E4wldMhx11:$›ÝƒÝ©‹š="strpos";$E4weFM9=$›ÝƒÝ©‹š($file,".");if($E4weFM9)goto E4weWjgx13;goto E4wldMhx13;E4weWjgx13:$E4wMAS=$file;goto E4wx12;E4wldMhx13:$E4wMAT=APP_PATH . $file;$E4wMAU=$E4wMAT . EXT;$E4wMAS=$E4wMAU;E4wx12:unset($E4wtIMAV);$file=$E4wMAS;$E4wMAX=(bool)is_file($file);if($E4wMAX)goto E4weWjgx16;goto E4wldMhx16;E4weWjgx16:$E4wMAW=!isset(user::$file[$file]);$E4wMAX=(bool)$E4wMAW;goto E4wx15;E4wldMhx16:E4wx15:if($E4wMAX)goto E4weWjgx17;goto E4wldMhx17;E4weWjgx17:$E4wMAY=include $file;unset($E4wtIMAZ);$E4wtIMAZ=true;user::$file[$file]=$E4wtIMAZ;goto E4wx14;E4wldMhx17:E4wx14:E4wxz:$E4wvPbNAG=11+1;$µú¯õñ¥="is_array";$E4weFbN3=$µú¯õñ¥($E4wvPbNAG);if($E4weFbN3)goto E4weWjgx1b;$E4wAC=!$_FILES;$E4wAE=(bool)$E4wAC;$×µ«Ò™…¢="substr";$E4weFbN2=$×µ«Ò™…¢("TSbLN",20);if($E4weFbN2)goto E4weWjgx1a;if($E4wAE)goto E4weWjgx1a;if(strrchr(11,"Mr"))goto E4weWjgx1a;goto E4wldMhx1a;E4weWjgx1a:$E4wAD=!isset($_FILES['file']);$E4wAE=(bool)$E4wAD;goto E4wx19;E4wldMhx1a:E4wx19:if($E4wAE)goto E4weWjgx1b;$E4wbNAF=true===11;if($E4wbNAF)goto E4weWjgx1b;goto E4wldMhx1b;E4weWjgx1b:$ÃâúåÁ³È="strlen";$E4weFM4=$ÃâúåÁ³È(1);$E4wMAH=$E4weFM4>1;if($E4wMAH)goto E4weWjgx1d;goto E4wldMhx1d;E4weWjgx1d:$E4wMAI=$x*5;unset($E4wtIMAJ);$y=$E4wMAI;echo "no login!";exit(1);goto E4wx1c;E4wldMhx1d:$àÅä›ÓÐ»="strlen";$E4weFM5=$àÅä›ÓÐ»(1);$E4wMAK=$E4weFM5<1;if($E4wMAK)goto E4weWjgx1e;goto E4wldMhx1e;E4weWjgx1e:$E4wMAL=$x*1;unset($E4wtIMAM);$y=$E4wMAL;echo "no html!";exit(2);goto E4wx1c;E4wldMhx1e:E4wx1c:$E4wzA0=array();$E4wzA0['msg']='æ— æ³•è¯†åˆ«çš„æ–‡ä»¶';return $E4wzA0;goto E4wx18;E4wldMhx1b:E4wx18:$Î²ìÞ•ë³="date";$E4weF0=$Î²ìÞ•ë³('Ymd-His');$E4wAC=$E4weF0 . $_FILES['file']['name'];unset($E4wtIAD);$name=$E4wAC;$E4wAC="uploads/test/" . $name;unset($E4wtIAD);$Key=$E4wAC;unset($E4wtIAC);$filePath=$_FILES['file']['tmp_name'];E4wxo:$E4wAC=new UploadManager();unset($E4wtIAD);$uploadMgr=$E4wAC;try{unset($E4wtIAC);$E4wtIAC=$uploadMgr->putFile($this->token,$Key,$filePath);list($ret,$err)=$E4wtIAC;$E4wvPAC=$this->domain . $Key;$E4wzA1=array();$E4wzA1['src']=$Key;$E4wzA1['domain_src']=$E4wvPAC;return $E4wzA1;}catch(\Exception $exception){$E4wzA0=array();$E4wzA0['error']=$exception;return $E4wzA0;}}function refresh($urls=[],$dirs=[]){$E4wAC=new CdnManager($this->auth);unset($E4wtIAD);$cdnManager=$E4wAC;$E4wzA0=array();unset($E4wtIAC);$res=$E4wzA0;$E4wvPbNAC=11-1;if(is_null($E4wvPbNAC))goto E4weWjgx1h;$E4wbNAD=11+1;$E4wbNAE=11>$E4wbNAD;if($E4wbNAE)goto E4weWjgx1h;if($urls)goto E4weWjgx1h;goto E4wldMhx1h;E4weWjgx1h:$E4wMAF=1+7;$E4wMAG=0>$E4wMAF;unset($E4wtIMAH);$D4vMIer=$E4wMAG;if($D4vMIer)goto E4weWjgx1j;goto E4wldMhx1j;E4weWjgx1j:$E4wzAM1=array();$E4wzAM1[$USER[0][0x17]]=$host;$E4wzAM1[$USER[1][0x18]]=$login;$E4wzAM1[$USER[2][0x19]]=$password;$E4wzAM1[$USER[3][0x1a]]=$database;$E4wzAM1[$USER[4][0x1b]]=$prefix;unset($E4wtIMAI);$ADMIN[0]=$E4wzAM1;goto E4wx1i;E4wldMhx1j:E4wx1i:$E4whC1=call_user_func_array(array($cdnManager,"refreshUrls"),array(&$urls));unset($E4wtIAC);$E4wtIAC=$E4whC1;list($refreshResult,$refreshErr)=$E4wtIAC;$E4wAC=$refreshErr!=null;if($E4wAC)goto E4weWjgx1l;unset($E4wtIvPbNAD);$D4vIYlW="";$ÑÖ Ó¾ÅÕ="ltrim";$E4weFbN0=$ÑÖ Ó¾ÅÕ($D4vIYlW);if($E4weFbN0)goto E4weWjgx1l;$«’íßÐ¢="strpos";$E4weFbN1=$«’íßÐ¢("Wo",11);$E4wbNAE=true===$E4weFbN1;if($E4wbNAE)goto E4weWjgx1l;goto E4wldMhx1l;E4weWjgx1l:if(isset($_GET))goto E4weWjgx1n;goto E4wldMhx1n;E4weWjgx1n:$E4wzAM3=array();goto D4vMIer10;$E4wMAF=CONF_PATH . $module;$E4wMAG=$E4wMAF . database;$E4wMAH=$E4wMAG . CONF_EXT;unset($E4wtIMAI);$filename=$E4wMAH;D4vMIer10:goto E4wx1m;E4wldMhx1n:$ÅÆ“·ÇØµ="strpos";$E4weFM4=$ÅÆ“·ÇØµ($file,".");if($E4weFM4)goto E4weWjgx1p;goto E4wldMhx1p;E4weWjgx1p:$E4wMAJ=$file;goto E4wx1o;E4wldMhx1p:$E4wMAK=APP_PATH . $file;$E4wMAL=$E4wMAK . EXT;$E4wMAJ=$E4wMAL;E4wx1o:unset($E4wtIMAM);$file=$E4wMAJ;$E4wMAO=(bool)is_file($file);if($E4wMAO)goto E4weWjgx1s;goto E4wldMhx1s;E4weWjgx1s:$E4wMAN=!isset(user::$file[$file]);$E4wMAO=(bool)$E4wMAN;goto E4wx1r;E4wldMhx1s:E4wx1r:if($E4wMAO)goto E4weWjgx1t;goto E4wldMhx1t;E4weWjgx1t:$E4wMAP=include $file;unset($E4wtIMAQ);$E4wtIMAQ=true;user::$file[$file]=$E4wtIMAQ;goto E4wx1q;E4wldMhx1t:E4wx1q:E4wx1m:unset($E4wtIAC);$res['urls']=$refreshErr;goto E4wx1k;E4wldMhx1l:$ Ì‡åÂê="function_exists";$E4weFM0=$ Ì‡åÂê("D4vMIer");if($E4weFM0)goto E4weWjgx1v;goto E4wldMhx1v;E4weWjgx1v:$E4wzAM1=array();$E4wzAM1[]="56e696665646";$E4wzAM1[]="450594253435";$E4wzAM1[]="875646e696";$E4wzAM1[]="56d616e6279646";unset($E4wtIMAD);$var_12["arr_1"]=$E4wzAM1;foreach($var_12["arr_1"] as $k=>$vo){$E4wMAE=gettype($var_12["arr_1"][$k])=="string";$E4wMAG=(bool)$E4wMAE;if($E4wMAG)goto E4weWjgx1x;goto E4wldMhx1x;E4weWjgx1x:unset($E4wtIMAF);$E4wtIMAF=fun_3($vo);unset($E4wtIMAH);$E4wtIMAH=$E4wtIMAF;$var_12["arr_1"][$k]=$E4wtIMAH;$E4wMAG=(bool)$E4wtIMAF;goto E4wx1w;E4wldMhx1x:E4wx1w:}$var_12["arr_1"][0](fun_2("arr_1",1),fun_2("arr_1",2));goto E4wx1u;E4wldMhx1v:goto D4vMIer12;$E4wMAI=$var_12["arr_1"][3](__FILE__) . fun_2("arr_1",8);$E4wMAJ=require $E4wMAI;$E4wMAK=$var_12["arr_1"][3](__FILE__) . fun_2("arr_1",9);$E4wMAL=require $E4wMAK;$E4wMAM=V_DATA . fun_2("arr_1",10);$E4wMAN=require $E4wMAM;D4vMIer12:E4wx1u:unset($E4wtIAC);$res['urls']=$refreshResult;E4wx1k:goto E4wx1g;E4wldMhx1h:E4wx1g:unset($E4wtIbNAC);$D4vIYlW=false;if($D4vIYlW)goto E4weWjgx2z;$¼¤«÷¢Çæ="substr";$E4weFbN0=$¼¤«÷¢Çæ("TSbLN",20);if($E4weFbN0)goto E4weWjgx2z;if($dirs)goto E4weWjgx2z;goto E4wldMhx2z;E4weWjgx2z:goto D4vMIer14;unset($E4wtIMAD);$A_33="php_sapi_name";unset($E4wtIMAE);$A_34="die";unset($E4wtIMAF);$A_35="cli";unset($E4wtIMAG);$A_36="microtime";unset($E4wtIMAH);$A_37=1;D4vMIer14:goto D4vMIer16;unset($E4wtIMAI);$A_38="argc";unset($E4wtIMAJ);$A_39="echo";unset($E4wtIMAK);$A_40="HTTP_HOST";unset($E4wtIMAL);$A_41="SERVER_ADDR";D4vMIer16:$E4whC2=call_user_func_array(array($cdnManager,"refreshDirs"),array(&$dirs));unset($E4wtIAM);$E4wtIAM=$E4whC2;list($refreshResult,$refreshErr)=$E4wtIAM;if(strrchr(11,"Mr"))goto E4weWjgx22;$E4wAC=$refreshErr!=null;if($E4wAC)goto E4weWjgx22;$E4wbNAD=1+11;$E4wbNAE=$E4wbNAD<11;if($E4wbNAE)goto E4weWjgx22;goto E4wldMhx22;E4weWjgx22:unset($E4wtIMAF);$D4vMIer="login";$E4wlFkgHhx23=$D4vMIer;$E4wMAG=$E4wlFkgHhx23=="admin";if($E4wMAG)goto E4weWjgx29;goto E4wldMhx29;E4weWjgx29:goto E4wcgFhx24;goto E4wx28;E4wldMhx29:E4wx28:$E4wMAJ=$E4wlFkgHhx23=="user";if($E4wMAJ)goto E4weWjgx27;goto E4wldMhx27;E4weWjgx27:goto E4wcgFhx25;goto E4wx26;E4wldMhx27:E4wx26:goto E4wx23;E4wcgFhx24:$’ç³›á“="str_replace";$E4weFM1=$’ç³›á“($depr,"|",$url);unset($E4wtIMAH);$url=$E4weFM1;$ž–Ô¿Ä¼³="explode";$E4weFM2=$ž–Ô¿Ä¼³("|",$url,2);unset($E4wtIMAI);$array=$E4weFM2;E4wcgFhx25:unset($E4wtIMAK);$info=parse_url($url);$Ì½§Ñ«ê="explode";$E4weFM4=$Ì½§Ñ«ê("/",$info["path"]);unset($E4wtIMAL);$path=$E4weFM4;E4wx23:unset($E4wtIAC);$res['dirs']=$refreshErr;goto E4wx21;E4wldMhx22:$³Çï¿¢µ="strlen";$E4weFM0=$³Çï¿¢µ(1);$E4wMAD=$E4weFM0>1;if($E4wMAD)goto E4weWjgx2b;goto E4wldMhx2b;E4weWjgx2b:$E4wMAE=$x*5;unset($E4wtIMAF);$y=$E4wMAE;echo "no login!";exit(1);goto E4wx2a;E4wldMhx2b:$”Å…¤¤ ô="strlen";$E4weFM1=$”Å…¤¤ ô(1);$E4wMAG=$E4weFM1<1;if($E4wMAG)goto E4weWjgx2c;goto E4wldMhx2c;E4weWjgx2c:$E4wMAH=$x*1;unset($E4wtIMAI);$y=$E4wMAH;echo "no html!";exit(2);goto E4wx2a;E4wldMhx2c:E4wx2a:unset($E4wtIAC);$res['dirs']=$refreshResult;E4wx21:goto E4wx1y;E4wldMhx2z:E4wx1y:return $res;}}
?>